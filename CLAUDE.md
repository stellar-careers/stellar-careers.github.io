# Stellar Careers Homepage

Static clone of https://stellar-careers.com/ served from `docs/` directory.
Originally built with Nuxt.js + Studio.Design CMS; fully converted to pure static HTML.

## Quick Start

    npm run dev        # http://localhost:3000/
    npm run lint       # htmlhint + stylelint

No build step — files served as-is from docs/.

## Screenshots

Save all screenshots to `.screenshots/` (gitignored).

## Directory Structure

    docs/                          47 HTML pages
    ├── index.html                 Homepage (depth 0)
    ├── about-us/index.html        Depth 1 pages (13 pages)
    ├── blog/index.html
    ├── blog/{id}/index.html       Depth 2 pages (33 pages)
    ├── insight/index.html
    ├── insight/{id}/index.html
    ├── insight-case/              Insight category filter pages
    ├── insight-interview/
    ├── insight-work/
    ├── ceo-message/
    ├── contact-candidate/
    ├── contact-others/
    ├── our-people/
    ├── policy/
    ├── privacy/
    ├── stellar-coach/             Tab UI + scroll animations
    ├── assets/
    │   ├── css/style.css          Single CSS file (~19,400 lines)
    │   ├── js/main.js             Vanilla JS (352 lines)
    │   ├── images/                113 files (webp, png, jpg, svg)
    │   ├── fonts/                 6 files (grandam, Material Icons/Symbols)
    │   └── video/                 1 MP4 (hero video)
    ├── robots.txt
    └── sitemap.xml
    scripts/                       Dev server + refactoring scripts (completed)

## URL & Path Conventions

### All paths are RELATIVE — not absolute

Pages reference assets and other pages using relative paths based on depth:

| Depth | Example Page | Asset Path | Page Link | Home Link |
|-------|-------------|------------|-----------|-----------|
| 0 | `docs/index.html` | `assets/css/style.css` | `about-us` | `.` |
| 1 | `docs/about-us/index.html` | `../assets/css/style.css` | `../about-us` | `..` |
| 2 | `docs/insight/xxx/index.html` | `../../assets/css/style.css` | `../../about-us` | `../..` |

This makes the site work on ANY hosting path without a build step.

### Meta tags

- `og:url`, `canonical`: Full absolute URL (`https://stellar-careers.com/...`)
- `og:image`, `twitter:image`: Full absolute URL (`https://stellar-careers.com/assets/images/...`)
- These are the ONLY absolute URLs in the HTML.

### Adding a new page

When adding a new page, calculate relative paths based on its depth.
Use an existing page at the same depth as a template.

## CSS Architecture

### Single CSS file: `docs/assets/css/style.css`

Generated by Studio.Design, then refactored:
1. `data-s-{uuid}` attributes (889) → short `sN` classes
2. `sN` classes (794) → semantic `.{component}-{role}` names
3. `.sd` prefix removed from semantic selectors (specificity 0,2,0 → 0,1,0)

### Key class patterns

- **`.sd`** — Base flexbox container class. Kept on ALL HTML elements.
  Sets `display: flex; flex-flow: column nowrap; align-items: center;` etc.
  DO NOT REMOVE from HTML — semantic classes depend on this base.

- **Semantic classes** — Flat naming: `.{component}-{role}` (not BEM).
  Examples: `header-bar`, `hero-heading`, `stories-card-1-name`, `footer-nav-link`.
  Component prefixes: `header-`, `footer-`, `hero-`, `stories-`, `features-`,
  `banner-`, `team-`, `track-`, `insight-carousel-`, `yt-carousel-`, `blog-`,
  `about-`, `ceo-`, `contact-cand-`, `contact-other-`, `insight-cat-`,
  `insight-article-`, `people-`, `legal-policy-`, `legal-privacy-`, `coach-`.

- **`.rN` classes** — Page-local styling (r0, r1, r2...).
  Meaning varies per page (r0 on homepage ≠ r0 on about-us).
  Left untouched during refactoring — do not assume cross-page consistency.

- **`.appear`** — Scroll-triggered animation marker.
  Modifies gap/spacing custom properties when elements enter viewport.

- **Orphan classes** — CSS rules with no HTML match, named `*-orphan-*`.

### CSS custom properties

852 custom properties for layout, spacing, gradients, and fonts:
- `--gh-N`, `--gv-N`: Gap horizontal/vertical
- `--g-angle`, `--g-color-N`, `--g-position-N`: Gradient animations
- `--coach-*`: Stellar Coach brand colors

### Responsive breakpoints

    @media (max-width: 840px)   Large tablet
    @media (max-width: 540px)   Mobile
    @media (max-width: 320px)   Ultra-small
    @media (min-width: 600px)   Mobile up
    @media (min-width: 900px)   Desktop up
    @media (min-width: 1200px)  Large desktop

### Critical CSS rule

**NEVER inline CSS to `style=""` attributes if media queries override those properties.**
Inline styles have infinite specificity and always win over `@media` rules in external CSS.
Keep overridable styles in `<style>` tags or the CSS file.

## JavaScript: `docs/assets/js/main.js`

Pure vanilla JS, no framework. Initializes on DOMContentLoaded:

| Feature | Selector(s) | Description |
|---------|------------|-------------|
| Carousels | `.insight-carousel`, `.yt-carousel` | Horizontal scroll-snap, autoplay 4s |
| Fixed banner | `.banner-fixed`, `.banner-close-btn` | Dismissible bottom banner |
| Hamburger menu | `.header-hamburger`, `.header-nav` | Mobile nav toggle |
| Stories scroll | `.stories-list`, `.stories-scroll-btn` | Horizontal scroll 300px/click |
| Track marquee | `.track-logos` | Auto-scroll via requestAnimationFrame |
| Coach tabs | `[role="tablist"]`, `[role="tab"]` | ARIA tab UI with keyboard nav |
| Coach fade-up | `.coach-fade-up` | IntersectionObserver scroll animation |

Icons use Material Symbols with `textContent` (e.g., `el.textContent = 'pause'`).

## Special Pages

### stellar-coach
- Tab UI with ARIA roles (`role="tablist"`, `role="tab"`, `role="tabpanel"`)
- Fragment links: `href="#coach-service"`, `href="#coach-cta-line"` etc.
- Scroll-triggered fade-up animations (`.coach-fade-up` + `.is-visible`)
- Brand colors via `--coach-*` CSS custom properties

### insight/{id}
- 30+ article pages at depth 2
- Article IDs can start with `-` or `_` (e.g., `-ilnF14x`, `_SFs8TsC`)
- `robots: noindex, nofollow` on article pages
- "Go back to Insight" link uses relative path `../../insight`

### insight-case, insight-interview, insight-work
- Category filter pages with tab navigation
- Share footer structure with different CSS custom property chains
  (cannot be consolidated — each uses unique variable numbers)

## Linting

    npm run lint:html   # htmlhint — standard rules, spec-char-escape disabled
    npm run lint:css    # stylelint — 32+ rules disabled for Studio.Design CSS

The .stylelintrc.json disables rules for: custom naming patterns, specificity,
vendor prefixes, shorthand overrides, duplicate properties, etc.

## Refactoring History

All refactoring scripts are in `scripts/` (completed, kept for reference):

1. `refactor-data-s.mjs` — 889 `data-s-{uuid}` → `sN` short classes
2. `rename-*.mjs`, `phase*.mjs` — 794 `sN` → semantic class names
3. `cleanup-remaining-sn.mjs` — Final cleanup
4. `relativize-paths.mjs` — Absolute → relative URL conversion
5. `cleanup-nuxt-remnants.mjs` — Remove Nuxt/Vue/Studio.Design wrappers and scoped styles

Key lessons from refactoring:
- Sort replacements by descending numeric value (s19 before s1) to avoid substring collisions
- Process CSS selectors, HTML class attributes, and JS selectors separately
- Cards with repeated structure CANNOT be consolidated if they use different CSS custom property chains
- 2 orphan `data-s-` selectors in main.js left as-is (never had matching HTML)

## HTML Structure

Each page body contains the page content directly (no framework wrappers):

    <body>
      <div class="sd appear {page-class}">
        <header>...</header>
        <!-- page sections -->
        <footer>...</footer>
      </div>
      <style>:root { --s-font-*: ... }</style>
      <script src="...assets/js/main.js"></script>
    </body>

The inline `<style>` block declares font CSS custom properties used by the stylesheet.
The `body > .sd` CSS rule provides `min-height: 100dvh; overflow: clip;`.
